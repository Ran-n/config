#! /bin/sh
# -*- coding: utf-8 -*-
# ------------------------------------------------------------------------------
#+ Autor:  	Ran#
#+ Creado: 	2022/10/05 21:58:48.495625
#+ Editado:	2022/10/26 18:53:42.906173
# ------------------------------------------------------------------------------

get_passwd(){
    read -s -p "$(src/uteis/echo-texto -l $LINGUA -i "mensaxe.usuario.indicar_contrasinal")" passwd

    if [[ -n "$passwd" ]]; then
        echo
        read -s -p "$(src/uteis/echo-texto -l $LINGUA -i "mensaxe.usuario.reindicar_contrasinal")" passwd2
        echo

        if [[ "$passwd" != "$passwd2" ]]; then
            echo
            src/uteis/echo-texto -l $LINGUA -i "mensaxe.erro.contrasinal.non_coincide"
            echo
            get_passwd
        fi
    fi
}

# copiase o ficheiro
cp cnf .cnf

echo
echo "Galego (gz)"
echo "English (en)"
echo "Castellano (cas)"
read -p "LANG: " lang
echo

sed -i 's/lang=.*/lang='"$lang"'/g' .cnf

LINGUA=$(src/uteis/trae-var -v "lang")
#LINGUA="gz"

get_passwd

sed -i 's/passwd=.*/passwd='"$passwd"'/g' .cnf

echo
