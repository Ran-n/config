#! /bin/sh
#+ Autor:	Ran#
#+ Creado:	08/03/2020 00:13:08
#+ Editado:	2022/10/07 02:12:35.916731

cd $(dirname $(readlink -f $0))

# se non existe o fich de cnf creao da base
[[ -f $(pwd)/.cnf ]] || $(pwd)/src/crear-cnf
LINGUA=$(grep -w "lang" $(pwd)/.cnf | cut -d= -f2)

mensaxe_operacion_inicio(){
    case $1 in
        c)
            $(pwd)/src/echo-texto -l $LINGUA -i "titulo.rconfig.operacion_copiado"
            ;;
        p)
            $(pwd)/src/echo-texto -l $LINGUA -i "titulo.rconfig.operacion_pegado"
            ;;
        s)
            $(pwd)/src/echo-texto -l $LINGUA -i "titulo.rconfig.operacion_inicio"
            ;;
    esac
}

mensaxe_operacion_fin(){
    case $1 in
        c)
            $(pwd)/src/echo-texto -l $LINGUA -i "final.rconfig.operacion_copiado"
            ;;
        p)
            $(pwd)/src/echo-texto -l $LINGUA -i "final.rconfig.operacion_pegado"
            ;;
        s)
            $(pwd)/src/echo-texto -l $LINGUA -i "final.rconfig.operacion_inicio"
            ;;
    esac
}

mensaxe_operacion(){
    case $1 in
        inicio)
            mensaxe_operacion_inicio $2
            ;;
        fin)
            mensaxe_operacion_fin $2
            ;;
    esac
}

copiar(){
    $(pwd)/src/copiar-cnfichs
}

pegar() {
    $(pwd)/src/pegar-cnfichs
}

inicio() {
    $(pwd)/src/crear-carpetas
    echo
    $(pwd)/src/baixar-scripts
    echo
    $(pwd)/src/instalar-progs
    echo
    pegar
}

# se non meten variable pois pon mensaxe e sae
if [ -z $1 ]; then
    $(pwd)/src/echo-texto -l $LINGUA -i "info.axuda.rconfig"
    exit 1
fi

case $1 in
    -c|--copiar|--copy)
        mensaxe_operacion "inicio" "c"
        copiar
        mensaxe_operacion "fin" "c"
        ;;

    -p|--pegar|--paste)
        mensaxe_operacion "inicio" "p"
        pegar
        mensaxe_operacion "fin" "p"
        ;;

    -s|--setup|-i|--inicio)
        mensaxe_operacion "inicio" "s"
        inicio
        mensaxe_operacion "fin" "s"
        ;;

    *)
        $(pwd)/src/echo-texto -l $LINGUA -i "info.axuda.rconfig"
        ;;
esac
